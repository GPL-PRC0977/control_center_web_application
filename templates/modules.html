<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modules</title>
    <style>
        .custom-blue {
            background: linear-gradient(180deg, #0b4486, #2A2A86);
        }
    </style>
</head>

<body>
    {% include 'navbar.html' %}

    <div class="card rounded-0">
        <div class="card-body position-relative" style="height: calc(100vh - 53px);">

            <!-- Full width search input with icon on the right -->


            <table class="table table-bordered table-hover table-sm" id="modulesTable">
                <thead>
                    <tr>
                        <th colspan="3">

                            <div class="">
                                <h5 class="float-start p-0 pt-1 mb-0">Application Name: <label class="text-primary">{{
                                        app_name
                                        }}</label></h5>

                                <input type="button" class="btn btn-sm btn-pro-white float-end rounded-0"
                                    onclick="window.history.back()" value="Back">
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="3">
                            <div class="position-relative">
                                <input type="text" id="moduleSearch" onkeyup="filterModules()"
                                    placeholder="Search module name here..."
                                    class="form-control form-control-sm pe-5 padding-right for icon space rounded-0"
                                    aria-label="Search module name here..." />
                                <i class="bi bi-search position-absolute"
                                    style="top: 50%; right: 15px; transform: translateY(-50%); pointer-events: none; color: #888;"></i>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th class="custom-blue text-white d-none">Module ID</th>
                        <th class="custom-blue text-white">Module Name</th>
                        <th class="custom-blue text-white">Module URL</th>
                        <!-- <th class="custom-blue" style="width: 40px;"></th> -->
                    </tr>
                </thead>
                <tbody>
                    {% for module in modules %}
                    <tr>
                        <td class="d-none">{{ module.module_id }}</td>
                        <td>{{ module.module_name }}</td>
                        <td>{{ module.url }}</td>
                        <!-- <td class="text-center">
                            <a href="#" class="text-dark ms-0">
                                <i class="bi bi-trash3-fill"></i>
                            </a>
                        </td> -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function filterModules() {
            const input = document.getElementById('moduleSearch');
            const filter = input.value.toLowerCase();
            const table = document.getElementById('modulesTable');
            const trs = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');

            for (let i = 0; i < trs.length; i++) {
                const tdName = trs[i].getElementsByTagName('td')[0];
                const tdUrl = trs[i].getElementsByTagName('td')[1];
                if (tdName && tdUrl) {
                    const nameText = tdName.textContent.toLowerCase();
                    const urlText = tdUrl.textContent.toLowerCase();
                    trs[i].style.display = (nameText.indexOf(filter) > -1 || urlText.indexOf(filter) > -1) ? '' : 'none';
                }
            }
        }
    </script>


</body>

</html>